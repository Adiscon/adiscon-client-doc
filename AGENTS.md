# Guide for Working with AI Agents in this Repository

## 1. Introduction

This document provides a comprehensive overview of the Adiscon documentation repository. It is intended for both human contributors and AI assistants (like Codex, Gemini, Claude, etc.). Its purpose is to explain the project structure, the products covered, and how to effectively use AI to perform maintenance and improvement tasks.

The Adiscon documentation repository is built using Sphinx, a powerful documentation generator that creates beautiful documentation from reStructuredText (`.rst`) source files. This guide will help you understand how to navigate the repository, maintain consistency, and efficiently perform various documentation tasks using AI assistance.

## 2. Project Structure

This repository uses a unified, product-centric directory structure. All documentation source files are located in subdirectories within the project root.

### Directory Layout

-   **`/build/`**: Auto-generated by the build system (`make`). Contains all output (HTML, PDF, CHM). Do not commit. Recreated on each build.

-   **`/source/`**: The authoritative location for all reStructuredText sources and most assets. Key subtrees include:
    -   `index.<product>.rst` entry points for each product (e.g., `index.winsyslog.rst`)
    -   Product/topic trees (e.g., `winsyslogspecific/`, `eventreporterspecific/`, `mwagentspecific/`, `interactivesyslogviewer/`, etc.)
    -   Shared library at `source/shared/` for cross-product topics, references, and word lists
    -   Shared images under `source/images/`

-   **Per-product configuration directories**: Each product has its own directory at the repository root containing a `conf.py` (and optional assets) used during builds via Sphinx's `-c` option:
    -   `/winsyslog/conf.py`
    -   `/rsyslog/conf.py`
    -   `/eventreporter/conf.py`
    -   `/mwagent/conf.py`
    -   `/syslogviewer/conf.py`
    -   `/winsyslog-j/conf.py`

-   **`conf_common.py`**: Shared Python helpers imported by each product `conf.py` for linkcheck ignore patterns, spelling word list integration, and optional extensions.

-   **`source/shared/conf.py`**: Minimal configuration used for fast preview of the shared library via `make shared-html`.

-   **`Makefile`**: The primary tool for building all documentation. Run `make help` to see available targets. Common targets include:
    -   `make list-projects` - List all available projects
    -   `make shared-html` - Build only the shared content library for quick validation
    -   `make html-<project>` - Build a single product (e.g., `make html-winsyslog`)
    -   `make all-html` - Build all products' HTML with strict error checking
    -   `make linkcheck` - Check for broken external links
    -   `make spelling` - Run spell checking across all projects
    -   `make validate-rst` - Run reStructuredText linters (doc8 & rstcheck)
    -   `make validate` - Run linkcheck, spelling, and rst linters together
    -   `make preview` - Serve built HTML locally for quick review
    -   `make clean` - Remove all build artifacts

-   **`AGENTS.md`**: This file - the guide for AI agents and contributors.

### File Naming Conventions

-   All documentation source files use the `.rst` extension and live under `/source/`
-   File names should be lowercase with hyphens separating words (e.g., `getting-started.rst`). Prefer hyphens for any new files. Avoid renaming existing files unless you also update all references and toctrees.
-   Prefer shared images under `source/images/`; product- or topic-specific images may live under the relevant subtree within `source/`
-   Use descriptive names that clearly indicate the content

### Shared vs. Product-Specific Content and Builds

-   Author content under `source/`. Shared topics and references belong in `source/shared/` where they can be reused across products.
-   Each product build uses its root-level `conf.py` via `sphinx-build -c <product>` while reading sources from `source/`.
-   For fast iteration on shared topics, use `make shared-html` which builds `source/shared/` in isolation with a minimal config. Some cross-document references may be unresolved in this mode and will resolve during full product builds.
-   For end-to-end verification of a single manual, use `make html-<project>`. For pre-release validation across all manuals, use `make all-html`.

## 3. Covered Products

This repository contains the official documentation for the following Adiscon products:

### WinSyslog
A Windows-based syslog server that collects, processes, and forwards log messages from various sources. Key features include:
-   Windows Event Log collection
-   Syslog reception and forwarding
-   Email notifications
-   Database logging

### EventReporter
A comprehensive Windows event log monitoring solution that provides:
-   Real-time event log monitoring
-   Advanced filtering capabilities
-   Multiple notification methods
-   Integration with various third-party systems

### MonitorWare Agent
A monitoring agent for Windows systems that:
-   Collects system performance metrics
-   Monitors application health
-   Provides alerting capabilities
-   Integrates with central monitoring systems

### Rsyslog
The enhanced syslog daemon for Linux/Unix systems featuring:
-   High-performance log processing
-   Reliable event logging with queuing
-   Modular design with input/output plugins
-   Advanced filtering and parsing capabilities

### SyslogViewer
A Windows application for viewing and analyzing syslog messages:
-   Real-time syslog message display
-   Advanced filtering and search
-   Message export capabilities
-   Support for various syslog formats

## 4. Project-Specific Documentation Rules

**IMPORTANT**: Before making any changes to `.rst` files, understand these critical rules to avoid introducing Sphinx warnings and errors. The CI/CD pipeline treats all warnings as errors with the `-W` flag.

**RST syntax reference**: For comprehensive reStructuredText syntax rules, inline markup guidelines, list formatting, code blocks, and general formatting best practices, please refer to `RST_RULES.md`. 

**This section's focus**: This section contains ONLY the project-specific patterns, conventions, and requirements unique to the Adiscon documentation that are not covered in the general RST syntax guide.

### 4.1 Project-Specific Field List Patterns

**Rule 1: Be careful with field lists**
```rst
# Pattern often seen in this codebase:
**Description:**
  Content here needs blank line after

Next content
```

**Rule 1a: Field lists after section headers need blank lines**
```rst
# WRONG:
Section Title
^^^^^^^^^^^^^
**File Configuration field:**
  fieldname

# CORRECT:
Section Title
^^^^^^^^^^^^^

**File Configuration field:**
  fieldname
```

### 4.2 Toctree and References

**Rule 2: File references are case-sensitive**
```rst
# WRONG:
.. toctree::
   EventReporter
   WinSyslog

# CORRECT:
.. toctree::
   eventreporter
   winsyslog
```

**Rule 3: Always use lowercase for internal references**
- File names should be lowercase: `eventreporter.rst` not `EventReporter.rst`
- References should match exactly: `:doc:`eventreporter`` not `:doc:`EventReporter``

**Rule 4: Cross-manual links MUST be guarded**

- If you reference a document from another manual, wrap the link in an `.. only::` block for the product that actually builds it. Otherwise, other builds will fail with "unknown document" or pull unintended pages into their navigation.

```rst
.. only:: eventreporter

   - :doc:`General Options <../../mwagentspecific/generaloptions>`

.. only:: winsyslog

   - :doc:`General Options <../generaloptions>`

.. only:: winsyslog_j

   - :doc:`General Options <../generaloptions-j>`
```

Common path mappings for "General Options":

- From `eventreporterspecific/*`: use `../../mwagentspecific/generaloptions`
- From `winsyslogspecific/*`: use `../generaloptions`
- From `winsyslogspecific/*` (Japanese build): use `../generaloptions-j`

Never use `../general-options` (hyphenated) for WinSyslog pages; that file name does not exist and will break builds.

### 4.3 Common Patterns in This Repository

**Rule 4: Product name consistency**
- Always use exact capitalization: `WinSyslog`, `EventReporter`, `MonitorWare Agent`, `Rsyslog`, `SyslogViewer`
- Never use variations like `Winsyslog`, `eventreporter`, `MW Agent`

**Rule 5: Windows terminology**
- Use "Windows" not "windows" for the OS
- Remove outdated "Windows NT" references unless specifically about NT
- Update old version references (XP, Vista) to modern versions (10, 11, Server 2019, 2022)

**Rule 6: Enumerated lists need blank lines after the last item**
```rst
# WRONG:
1. First step
2. Second step
**Note:** Important information

# CORRECT:
1. First step
2. Second step

**Note:** Important information
```

**Rule 7: Directory names are case-sensitive in references**
```rst
# WRONG (if actual directory is "interactivesyslogviewer"):
.. toctree::
   ../interactive syslogviewer/index
   ../InterActive SyslogViewer/index

# CORRECT:
.. toctree::
   ../interactivesyslogviewer/index
```

**Rule 8: Be careful with backslashes in inline literals**
```rst
# In Windows paths and other contexts, backslashes may need escaping
# Example: ``C:\\Program Files\\Adiscon``
```

**Rule 9: Never fix spelling errors in FileConfig variable names**
```rst
# WRONG - Don't "fix" these:
**File Configuration field:**
  fieldname

# CORRECT - Preserve original spelling:
**File Configuration field:**
  fieldname
```

**Rule 9a: FileConfig variable names are case-sensitive and must be preserved exactly**
### 4.4 FAQ and Navigation Hygiene (IMPORTANT)

- Do NOT include `source/shared/faq-supporting-labels.rst` inside product FAQ articles. That helper injects a hidden toctree and can pollute the FAQ sidebar with unrelated entries. Include it only on dedicated supporting pages – not on actual FAQ articles.
- Keep FAQ pages self-contained. Avoid "Related Information" sections that cross-link to other manuals unless they are guarded with `.. only::` tags per Rule 4 above.
- If a page truly needs labels from other manuals, prefer plain hyperlinks or guard the cross-manual `:doc:` links with `.. only::`.

### 4.7 Exclude Patterns for Per-Product Builds

- The `exclude_patterns` in each `<product>/conf.py` should exclude other manuals to speed up builds, but never exclude pages that are referenced in that product's `index.<product>.rst` toctree. Excluding a toctree target causes the error: "document isn't included in any toctree".
- `winsyslog` and `winsyslog-j` should be kept in parity. The `winsyslog-j` build is the same as `winsyslog` but with extra Japanese-specific files; it should not exclude the whole WinSyslog FAQ toctree.
- When adding new cross-manual FAQ entries, verify that other products either exclude those files or guard links with `.. only::` to avoid leaking content into sidebars.

### 4.8 Environment Setup Gotchas

- `sphinx-build`, `doc8`, and other tools are installed under `~/.local/bin` by default. Prepend this to PATH before running `make`:

```bash
export PATH="$HOME/.local/bin:$PATH"
```

- The spelling extension (`sphinxcontrib.spelling`) requires the Enchant C library. On Debian/Ubuntu runners install it first to avoid build failures:

```bash
sudo apt-get update -y && sudo apt-get install -y libenchant-2-2
```

- For QA tasks, install both runtime and QA requirements:

```bash
pip install -r requirements.txt -r requirements-qa.txt
```

- If spelling flags domain terms (e.g., IoT, Remoting, config), add them to `source/shared/spelling-wordlist.txt` rather than altering content.

- FileConfig variable names are part of the actual configuration system
- Changing spelling, capitalization, or formatting will break functionality
- Always preserve the exact variable names as they appear in the original documentation
- This includes preserving typos, unusual capitalization, and non-standard formatting

- **Note on doc8**: If the `doc8` command is not found when running `make validate-rst`, use `python -m doc8` instead. The Makefile has been updated to use this form.

### 4.4 Pre-Change Checklist

Before making any changes:

1. **Run a test build first**: `make html-<project> SPHINXOPTS="-W"`
2. **Check for existing patterns**: Look at similar files for formatting conventions
3. **Validate references**: Ensure all `:doc:` and `:ref:` targets exist
4. **Test emphasis closure**: Count asterisks - they should always be even
5. **Check list formatting**: Ensure blank lines after all lists
6. **Verify file names**: All lowercase, use hyphens not underscores
7. **Check inline literals**: Ensure spaces before and after double backticks
8. **Verify field lists**: Ensure blank lines between section headers and field lists
9. **Preserve FileConfig variable names**: Never change spelling, capitalization, or formatting of FileConfig variable names - they are part of the actual configuration system
10. **Consult RST_RULES.md**: For comprehensive RST syntax rules and examples, refer to the `RST_RULES.md` file which provides detailed guidelines for correct reStructuredText formatting

### 4.5 Post-Change Validation

**CRITICAL REQUIREMENT**: After making ANY changes to `.rst` files, you MUST run the full build process and all validation checks to ensure no warnings or errors are introduced.

**Required Steps:**

1. **Always run the full build**: `make all-html SPHINXOPTS="-W"`
   - This builds ALL documentation sets and catches warnings across the entire project
   - The build system treats warnings as errors and will fail if any warnings exist
   - Never skip this step, even for "minor" changes

2. **Run RST validation**: `make validate-rst`
   - Checks for RST syntax errors, formatting issues, and style violations
   - Uses `doc8` for style checking and `rstcheck` for syntax validation
   - Fixes common issues like missing newlines at end of file, trailing whitespace, and invalid directives
   - **Note**: If `doc8` command is not found, use `python -m doc8` instead

3. **Run spelling check**: `make spelling`
   - Validates spelling across all documentation products
   - Flags unknown words that may need to be added to `source/shared/spelling-wordlist.txt`
   - For legitimate technical terms or product-specific words, add them to the wordlist rather than changing the content
   - Domain terms, acronyms, and technical jargon should be added to the wordlist

4. **Fix warnings immediately**: Don't commit with warnings
   - All warnings must be resolved before changes are considered complete
   - Use the patterns in section 4.3 and Recipe 6 to systematically fix issues
   - Re-run validation after each batch of fixes until clean

5. **Check rendered output**: Look at the HTML to ensure formatting is correct
   - Verify that emphasis markup renders correctly
   - Check that lists display properly
   - Ensure code blocks are formatted as expected

6. **Test all products**: If changing shared files (in `/source/`), test all product builds
   - Changes to files in `/source/` affect multiple documentation sets
   - Each product must build cleanly: eventreporter, mwagent, rsyslog, syslogviewer, winsyslog, winsyslog-j

**Why This Matters:**
- RST formatting errors propagate across documentation sets
- Small syntax errors can break multiple product builds
- The CI/CD pipeline will fail on any warnings
- Clean builds ensure professional documentation quality
- Spelling errors reduce documentation credibility
- Consistent formatting improves readability and maintainability

### 4.6 Pre-Pull Request Checklist

**MANDATORY**: Before creating a pull request, you MUST run all validation checks to ensure the codebase is ready for review.

**Required Pre-PR Validation Steps:**

1. **Run full build with strict warnings**: `make all-html SPHINXOPTS="-W"`
   - Verify zero warnings across all products
   - Fix any build errors or warnings before proceeding

2. **Run RST validation**: `make validate-rst`
   - Ensures all RST files follow proper syntax and style guidelines
   - Checks for common formatting issues
   - Verify zero errors before proceeding

3. **Run spelling check**: `make spelling`
   - Validates spelling across all documentation
   - Add any legitimate technical terms to `source/shared/spelling-wordlist.txt` if flagged
   - Verify zero spelling errors before proceeding

4. **Optional but recommended**: Run full validation suite: `make validate`
   - Runs linkcheck, spelling, and RST validation together
   - Provides comprehensive pre-PR validation
   - Fix any issues found before creating the PR

**Validation Command Summary:**
```bash
# Activate virtual environment
source venv/bin/activate

# Run all validation checks (recommended)
make validate

# Or run individually:
make all-html SPHINXOPTS="-W"  # Build with strict warnings
make validate-rst              # RST syntax and style checks
make spelling                   # Spelling validation
make linkcheck                 # Check for broken links
```

**Important Notes:**
- Never skip validation steps even for small changes
- All checks must pass with zero errors/warnings before creating PR
- The CI/CD pipeline will run these same checks and fail if issues are found
- Fixing issues before PR submission saves time and reduces review cycles

## 5. How to Use AI Agents: Prompt Recipes

To ensure consistency and efficiency, please use the following prompt templates when instructing an AI agent to perform tasks. These recipes are designed to provide clear, actionable instructions that help AI agents understand the context and requirements.

### Recipe 1: Fixing Broken Links and Build Warnings

**Goal:** Find and fix all broken references, labels, and other warnings that cause the strict Sphinx build to fail.

**Prompt:**
```
Act as a Sphinx documentation expert. Your goal is to make the entire documentation build successfully in strict mode.

1. Execute the build command: `make all-html`. The Makefile is configured to run Sphinx with the `-W --keep-going` flags, which turns warnings into errors.

2. Parse the build output and systematically identify every "WARNING:" or "ERROR:" message.

3. For each error, navigate to the specified file and line number and apply the necessary fix. Common issues include:
   - Broken `:ref:` references - ensure the target label exists
   - Invalid `:doc:` paths - verify the document exists at the specified path
   - Undefined labels - add missing labels or correct references
   - Missing toctree entries - ensure all referenced documents exist
   - Duplicate labels - rename duplicates to be unique

4. After fixing a batch of errors, re-run `make all-html` to verify the fixes and identify any remaining issues.

5. Repeat the process until the `make all-html` command completes without any errors.
```

### Recipe 2: Unifying Terminology and Style

**Goal:** Ensure that spelling, grammar, and technical terms are used consistently across the entire documentation set.

**Prompt:**
```
Act as a senior technical writer. Your task is to perform a deep content cleanup on all `.rst` files in the `{product-name}` directory.

1. Recursively scan all `.rst` files in the specified directory.

2. Enforce terminological consistency:
   - Product names must be spelled exactly as: WinSyslog, EventReporter, MonitorWare Agent, Rsyslog (not RSyslog), SyslogViewer
   - Use "Windows" not "windows" when referring to the operating system
   - Use "Linux" not "linux" when referring to the operating system
   - Standardize technical terms: "syslog" (not "sys log"), "event log" (not "eventlog")

3. Correct all syntactical, grammatical, and spelling errors:
   - Fix subject-verb agreement
   - Correct punctuation errors
   - Fix spelling mistakes
   - Ensure consistent use of Oxford commas
   - **EXCEPTION**: Never fix spelling errors in FileConfig variable names - these are part of the actual configuration system and must be preserved exactly

4. Maintain consistent formatting:
   - Use sentence case for headings (not Title Case)
   - Ensure consistent indentation in code blocks
   - Use consistent list formatting (bullets vs. numbers)

5. Pay close attention to not breaking any Sphinx directives or roles (`:ref:`, `.. code-block::`, etc.). 

6. Apply all changes directly to the files, preserving the original structure and Sphinx markup.
```

### Recipe 3: Adding Configuration Examples

**Goal:** Identify sections that explain a feature but lack a practical example, and add one.

**Prompt:**
```
Act as a technical expert for `{product-name}`. Your task is to improve the documentation by adding practical examples.

1. Scan the `.rst` files in the `/{product-name}/` directory.

2. Identify sections that describe a feature, an action, or a configuration parameter but do not have a corresponding code sample. Look for:
   - Configuration instructions without examples
   - Feature descriptions without usage demonstrations
   - Parameter explanations without sample values

3. For each identified section, add a clear and simple example using appropriate markup:
   - Use `.. code-block:: {language}` for code samples
   - Use `.. literalinclude::` for including example files
   - Add inline code with double backticks for short snippets

4. Ensure examples are:
   - Self-contained and complete
   - Well-commented where necessary
   - Tested and functional
   - Relevant to the specific feature being documented

5. Add at least three new, useful examples that demonstrate common use cases.
```

### Recipe 4: Improving Navigation and Structure

**Goal:** Enhance the documentation structure to make it easier for users to find information.

**Prompt:**
```
Act as an information architect specializing in technical documentation. Your task is to improve the navigation and structure of the `{product-name}` documentation.

1. Analyze the current structure by examining:
   - The main `index.rst` file
   - All `toctree` directives
   - The logical flow of topics

2. Identify structural improvements:
   - Missing cross-references between related topics
   - Sections that should be split into smaller, focused pages
   - Topics that need better organization or grouping
   - Missing index entries for important terms

3. Implement improvements:
   - Add appropriate `:ref:` labels and cross-references
   - Create new `.rst` files where content should be split
   - Update `toctree` directives to reflect better organization
   - Add `.. index::` entries for key concepts

4. Ensure all changes maintain backward compatibility with existing links where possible.
```

### Recipe 5: Creating Release Notes and Change Logs

**Goal:** Generate or update release notes based on recent changes to the product.

**Prompt:**
```
Act as a technical documentation specialist. Your task is to create or update release notes for `{product-name}`.

1. Locate the existing release notes file (typically `release-notes.rst` or `changelog.rst`).

2. If no release notes exist, create a new file following this structure:
   - Version number and release date
   - New features
   - Improvements
   - Bug fixes
   - Known issues
   - Upgrade notes

3. Format entries consistently:
   - Use bullet points for each item
   - Start with the component affected
   - Describe the change clearly
   - Include issue/ticket numbers where applicable

4. Ensure the release notes are:
   - Written for the target audience (administrators/users)
   - Clear and concise
   - Free of internal jargon
   - Properly integrated into the documentation structure
```

### Recipe 6: Fixing Sphinx Warnings Systematically

**Goal:** Fix all Sphinx warnings that prevent clean builds across ALL documentation sets.

**Prompt:**
```
Act as a Sphinx documentation expert. Your task is to fix all warnings across the entire documentation project.

1. **CRITICAL FIRST STEP**: Always run `make all-html` to identify ALL warnings across ALL documentation sets:
   - This builds: eventreporter, mwagent, rsyslog, syslogviewer, winsyslog, winsyslog-j
   - Captures all warnings that could break the CI/CD pipeline
   - Never work on individual products alone - RST files are shared

2. Create a systematic fix script that addresses these common issues in priority order:
   - Inline literal delimiter spacing (most common): ensure spaces around ``text``
   - Inline emphasis issues (unclosed asterisks)
   - Bullet list formatting (missing blank lines after lists)
   - Definition list formatting (missing blank lines after)
   - Title underline length mismatches
   - Case-sensitive file references in toctrees
   - Field list formatting after section headers
   - Enumerated list formatting (blank lines after)

3. Critical patterns to fix:
   - `text``code``text` -> `text ``code`` text` (add spaces around inline literals)
   - `* *Text:**` -> `**Text:**`
   - Add blank lines after all lists before next content
   - Fix split emphasis across lines: `**text\nacross lines**` -> `**text across lines**`
   - Ensure all file references are lowercase in toctrees
   - Add blank lines between section headers and field lists
   - Never split inline literals across lines
   - Use double backticks for code: ``text`` not `text`

4. Apply fixes incrementally and test after each batch with `make all-html`
   - **NEVER** test individual products only - always test the full build
   - This ensures fixes don't introduce new warnings in other documentation sets
   - Continue until `make all-html` completes with zero warnings

5. Focus on the most common warning first: "Inline literal start-string without end-string" - usually spacing issues.

6. **FINAL VERIFICATION**: Run `make all-html` one final time to ensure completely clean build

7. Document what patterns were fixed for future reference.
```

### Recipe 7: FINISH (Close Out Work and Changelogs)

**Goal:** Conclude remaining tasks, ensure documentation builds are clean, and update changelogs if present.

**Prompt:**
```
Act as a release-prep assistant. Your goal is to finish all remaining work items and ensure the repo is ready for review.

1. Reconcile the task list: mark completed items, cancel obsolete ones, and list any blockers.

2. Run the full validation suite: `make validate`
   - This runs: `linkcheck`, `spelling`, and `validate-rst` together
   - Provides comprehensive pre-PR validation
   - Fix any issues found before proceeding

3. Run full build with strict warnings: `make all-html SPHINXOPTS="-W"`
   - Verify zero warnings across all products
   - Fix any build errors or warnings before proceeding

4. If warnings/errors appear, fix them and re-run until clean:
   - RST validation errors: fix syntax issues, add missing newlines, fix formatting
   - Spelling errors: add legitimate terms to `source/shared/spelling-wordlist.txt`
   - Build warnings: follow Recipe 6 patterns to fix systematically

5. Update changelogs if present (e.g., `CHANGELOG.md` or per-product notes):
   - Add entries for changes (structure, recipes, build tooling, rule updates)
   - Use consistent date/version formatting

6. Verify all validation checks pass:
   - `make validate-rst` - zero errors
   - `make spelling` - zero misspellings
   - `make all-html SPHINXOPTS="-W"` - zero warnings

7. Summarize what changed and what was verified.
```

### Recipe 8: SUMMARIZE (PR and Squashed Commit Messages)

**Goal:** Produce concise, copy-ready summaries for both the pull request description and a squashed commit.

**Prompt:**
```
Act as a maintainer preparing summaries. Generate two outputs:

1) Pull Request summary (audience: reviewers):
   - What changed (high level bullets)
   - Why it changed (intent and benefits)
   - Validation performed (commands + results)
   - Risks/notes (breaking changes, follow-ups)

2) Squashed commit message (concise):
   - Imperative subject line (<= 72 chars)
   - Short body (what/why), wrapped at 72 chars
   - Optional bullet list of key edits
```

### Shortcut Keywords

You can ask an agent to execute these by name:

-   **FINISH**: Run the close-out flow from Recipe 7 (reconcile tasks, run builds/QA, update changelogs, summarize).
-   **SUMMARIZE**: Produce PR and squashed commit summaries per Recipe 8.

### Quick Start

1. Create and activate a virtual environment.
2. Install dependencies: `pip install -r requirements.txt -r requirements-qa.txt`.
3. Build a single product: `make html-<project>` (e.g., `make html-winsyslog`).
4. Build everything (strict): `make all-html`.
5. Run QA suite: `make validate`.
6. Preview: `make preview` (after building HTML).

## 6. Best Practices for AI Agents

When working with this repository, AI agents should follow these best practices:

### Understanding Context
1. Always read the existing documentation structure before making changes
2. Understand the target audience for each product's documentation
3. Maintain consistency with existing style and formatting

### Making Changes
1. Make incremental changes rather than large-scale rewrites
2. Test all code examples before including them
3. Preserve existing Sphinx directives and markup
4. Commit changes with clear, descriptive messages
5. Do **not** "correct" spelling inside URLs or hyperlink targets—even if a URL looks misspelled, keep the original form.

### Quality Assurance
1. **MANDATORY**: Always run `make all-html SPHINXOPTS="-W"` after making changes
   - This is non-negotiable for ANY RST file modifications
   - Fix ALL warnings before considering the task complete
   - Clean builds are required for professional documentation

2. **MANDATORY**: Run RST validation: `make validate-rst`
   - Checks for syntax errors, formatting issues, and style violations
   - Ensures files have proper newlines, no trailing whitespace, correct formatting
   - Fix all errors before proceeding

3. **MANDATORY**: Run spelling check: `make spelling`
   - Validates spelling across all documentation products
   - Add legitimate technical terms to `source/shared/spelling-wordlist.txt` if flagged
   - Fix all spelling errors before proceeding

4. **RECOMMENDED**: Run full validation suite: `make validate`
   - Runs all QA checks together (linkcheck, spelling, validate-rst)
   - Provides comprehensive validation before PR submission

5. Review the generated HTML to ensure formatting is correct
   - Verify that emphasis markup renders correctly
   - Check that lists display properly
   - Ensure code blocks are formatted as expected

6. Check that all internal links work properly
   - Use `make linkcheck` to verify external links (may be slow)

7. Verify that examples are accurate and functional

8. **Final verification**: Ensure all checks pass with zero errors/warnings:
   - `make all-html SPHINXOPTS="-W"` - zero warnings
   - `make validate-rst` - zero errors
   - `make spelling` - zero misspellings

9. When modifying YAML files (including GitHub Actions workflows), run `yamllint` on the changed files before finishing your work.

### Communication
1. Document significant changes in commit messages
2. Flag any areas of uncertainty for human review
3. Suggest improvements beyond the immediate task when appropriate

### Clarification Handling
1. When uncertain about requirements or implementation details, follow the guidelines in section 9 (Agent Task Summary Guidelines)
2. Document all clarifications and uncertainties in the "Clarifications and Decisions" section of your task summary
3. This approach keeps the actual documentation files clean and professional while ensuring all questions are properly tracked

## 7. Common Issues and Solutions

### Build Errors

**Problem:** "WARNING: undefined label: 'some-label'"
**Solution:** Either add the missing label to the target document or correct the reference.

**Problem:** "WARNING: document isn't included in any toctree"
**Solution:** Add the document to an appropriate `toctree` directive or mark it as `:orphan:`.

**Problem:** "WARNING: duplicate label"
**Solution:** Rename one of the labels to be unique across the documentation.

**Problem:** "ERROR: Unexpected indentation"
**Solution:** Usually caused by field lists immediately after section headers. Add a blank line between them.

**Problem:** "WARNING: Inline literal start-string without end-string"
**Solution:** Check for:
- Missing spaces around inline literals (most common cause)
- Split inline literals across lines
- Unclosed double backticks
- Inline literals without proper delimiter separation

**Problem:** "WARNING: Enumerated list ends without a blank line"
**Solution:** Add a blank line after the last item in numbered lists before the next paragraph.

**Problem:** "WARNING: Inline interpreted text or phrase reference start-string without end-string"
**Solution:** Often caused by single backticks used incorrectly. Use double backticks for inline literals: ``text`` not `text`.

### Formatting Issues

**Problem:** Code blocks not rendering correctly
**Solution:** Ensure proper indentation and that the language is specified correctly in `.. code-block::`.

**Problem:** Lists not formatting properly
**Solution:** Check for consistent indentation and blank lines between list items where needed.

## 8. Additional Resources

### Sphinx Documentation
- [Official Sphinx Documentation](https://www.sphinx-doc.org/)
- [reStructuredText Primer](https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html)
- [Sphinx Directives](https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html)

### Adiscon Resources
- [Adiscon Website](https://www.adiscon.com/)
- [Support Portal](https://ticket.adiscon.com/)
- Product-specific forums and communities

### Version Control
- Always work on a feature branch
- Create pull requests for review
- Follow the project's contribution guidelines

## 9. Agent Task Summary Guidelines

AI agents must **not** create an `AGENT_FINAL_SUMMARY.md` file. Instead, provide the complete task summary directly in your final chat response so reviewers have the context without opening additional files.

### Required Final Response Structure

Your final message must cover the following sections:

1. **Task Overview**
   - Briefly describe the primary goal and relevant context for the work performed.

2. **Changes Made**
   - Summarize the key modifications and identify the files or areas affected.
   - Call out any issues that were resolved.

3. **Testing and Verification**
   - List every command executed to validate the changes along with the results.
   - If a command fails, note why and describe any follow-up required.

4. **Clarifications and Decisions** (as needed)
   - Document assumptions, judgement calls, and open questions for reviewers.
   - **IMPORTANT**: When uncertain about requirements or implementation details:
     * Do NOT add inline comments such as `.. TODO: [CLARIFICATION NEEDED]` inside documentation files.
     * Present all questions and clarification requests in this section of the final response.

5. **Next Steps** (optional)
   - Highlight recommended follow-up tasks or known limitations when relevant.

### Important Notes
- Keep summaries factual and concise.
- Focus on information that helps reviewers and future maintainers.
- Include both successes and any remaining issues in the final response.
- Do not add task-specific summary files (like `SPHINX_FIXES_SUMMARY.md`); all status updates belong in the final response.

## 10. Conclusion

This guide provides the foundation for effectively working with the Adiscon documentation repository. Whether you're a human contributor or an AI assistant, following these guidelines will help maintain high-quality, consistent documentation that serves our users well.

Remember that documentation is a living entity that requires continuous improvement. Your contributions, whether fixing errors, adding examples, or improving structure, directly impact the user experience and the success of Adiscon products.

For questions or suggestions about this guide, please open an issue in the repository or contact the documentation team.
